"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[686],{6686:(B,S,t)=>{t.r(S),t.d(S,{App:()=>ae,default:()=>Qe});var e=t(85893),A=t(87943),C=t(64064),v=t(82911),x=t(49756),f=t(63118),j=t(59197),E=t(96486),a=t(67294),M=t(86896),L=t(34104);const V=({onClick:s,testid:n})=>{const{formatMessage:o}=(0,M.Z)(),l=(0,a.useMemo)(()=>(0,E.uniqueId)("import-info-action-"),[]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{"data-tooltip-id":l,"data-tooltip-content":o({id:"manage-crypto.info-action.text"}),children:(0,e.jsx)(x.z,{testid:n,theme:f.jM.TRANSPARENT,noPadding:!0,onClick:s,children:(0,e.jsx)(j.p,{colorClass:"text-iconNormal"})})}),(0,e.jsx)(L.u,{id:l,className:"tw-tooltip"})]})};var w=t(74028),W=t(96854),D=t(48161),H=t(32193),g=t(69671),N=t(48303),y=t(45618),de=t(36117),X=t(85942),me=t(87326),ue=t(91214),he=Object.defineProperty,ve=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,Q=(s,n,o)=>n in s?he(s,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[n]=o,je=(s,n)=>{for(var o in n||(n={}))pe.call(n,o)&&Q(s,o,n[o]);if(Y)for(var o of Y(n))fe.call(n,o)&&Q(s,o,n[o]);return s},ge=(s,n)=>ve(s,xe(n));const ye=(s,n)=>s.symbol.localeCompare(n.symbol),Ie=()=>{const s=(0,X.EQ)(),n=(0,X.Lk)(),{isTest:o}=(0,ue.p)(),l=(0,me.R)();return(0,a.useMemo)(()=>(o?n:s).reduce((u,i)=>(l[i.blockchainId]&&u.push(ge(je({},i),{blockchain:l[i.blockchainId]})),u),[]).sort(ye),[o,n,s,l])};var J=t(89250),Pe=t(58533),b=t(77985),F=t(1942),U=t(99244),Se=t(39635),Ae=t(24044),Ce=t(17889),Ee=t(50533),Me=t(40845),Ne=t(24456),Oe=t(59078),k=t(34601),Te=t(44525),Z=t(70473),q=(s,n,o)=>new Promise((l,u)=>{var i=r=>{try{d(o.next(r))}catch(m){u(m)}},h=r=>{try{d(o.throw(r))}catch(m){u(m)}},d=r=>r.done?l(r.value):Promise.resolve(r.value).then(i,h);d((o=o.apply(s,n)).next())});const Le=({asset:s})=>{const{trackAnalytics:n}=(0,Te.z)(),{formatMessage:o}=(0,M.Z)(),l=(0,Ce.Z)(),u=(0,J.s0)(),[i,h]=(0,a.useState)(s.isShownInHomeScreen),[d,r]=(0,a.useState)(!1),m=(0,Ee.v9)(P=>P.wallet.accounts),O=P=>q(void 0,null,function*(){h(!P.isShownInHomeScreen),r(!0),yield Oe.Tl.emit(Ae.Z.TOGGLE_ASSET_VISIBILITY,P),r(!1)}),p=(0,Ne.z)(s),I=(0,a.useMemo)(()=>{const P=p.isCustom?Me.Bk.toString():(0,k.EQ)(s.assetId).coinId;return!m[l.id][P]},[m,p]);if(!p)return null;const G=()=>q(void 0,null,function*(){I||(i||(yield O(s)),u(`${v.Z.ASSET}/${s.assetId}`))});return(0,e.jsx)(F.e,{disabled:I||d,onClick:G,children:(0,e.jsxs)("div",{className:"flex justify-between space-x-2 items-center",children:[(0,e.jsx)("div",{className:I?"opacity-70":"opacity-100",children:(0,e.jsx)(U.C,{src:s.iconUrl,name:s.name,network:p})}),(0,e.jsxs)("div",{className:`flex-grow ${I?"opacity-70":"opacity-100"}`,children:[(0,e.jsxs)("div",{className:"flex flex-row space-x-1 items-center ",children:[(0,e.jsx)("div",{children:(0,e.jsx)(N.x,{testid:"asset-symbol",type:y.Xi.TITLE,children:s.symbol})}),(0,e.jsx)("div",{children:s.type&&(0,e.jsx)(b.C,{testid:"asset-type",text:s.type})})]}),(0,e.jsx)("div",{className:"flex flex-row space-x-1",children:(0,e.jsx)(N.x,{testid:"asset-blockchain",type:y.Xi.CAPTION,children:p.name})})]}),(0,e.jsx)("div",{className:d?"opacity-50":"opacity-100",children:I?(0,e.jsx)(b.C,{text:o({id:"manage-assets.support-coming-soon"})}):(0,e.jsx)(Se.r,{testid:"toggle-asset-switch",label:s.name,checked:i,onChange:()=>{n({event:Z.ih.TOGGLE_HOMESCREEN_ASSET_VISIBILITY,props:{pageViewSource:Z.pG.MANAGE_CRYPTO,assetName:s.name,assetId:s.assetId,enabled:!i}}),O(s)}})})]})})},De=({assets:s,loadMoreItems:n,hasNextPage:o})=>{const l=window.innerHeight-16-16-52-22-56-46;return(0,e.jsx)(Pe.Z,{dataLength:s.length,next:n,height:l,className:"tw-scrollbar",hasMore:!!o,loader:null,scrollThreshold:"5px",children:(0,e.jsx)("div",{className:"flex flex-col space-y-5",children:s.map(u=>(0,e.jsx)(Le,{asset:u},u.assetId))})})};var He=t(94061),Re=t(47031);const _=24,ee=24,se=({width:s,height:n,colorClass:o})=>(0,e.jsx)("svg",{className:o,fill:"none",width:s??_,height:n??ee,viewBox:`0 0 ${_} ${ee}`,xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4141 11H20V4H13V6.5H11V4.00049H4V11.0005H11V8.5H13V9.58569L9.58569 13H4V20H11V17.5H13V20H20V13H13V15.5H11V14.4141L14.4141 11ZM17.5 6.5H15.5V8.5H17.5V6.5ZM8.5 6.50049H6.5V8.50049H8.5V6.50049ZM6.5 15.5H8.5V17.5H6.5V15.5ZM17.5 15.5H15.5V17.5H17.5V15.5Z",fill:"currentColor"})});var Be=t(80358),te=t(88813),$=t(86215),Ve=t(89939),we=(s,n,o)=>new Promise((l,u)=>{var i=r=>{try{d(o.next(r))}catch(m){u(m)}},h=r=>{try{d(o.throw(r))}catch(m){u(m)}},d=r=>r.done?l(r.value):Promise.resolve(r.value).then(i,h);d((o=o.apply(s,n)).next())});const We=({selectedNetworks:s,onSelect:n})=>{const{formatMessage:o}=(0,M.Z)(),l=(0,Ve.s)(),u=(0,a.useMemo)(()=>[...l].sort((d,r)=>d.name.localeCompare(r.name)),[l]),i=(0,a.useMemo)(()=>l.find(d=>d.id===s?.[0].blockchainId),[l,s]),h=d=>we(void 0,null,function*(){if(d===null){n(null);return}n([{prefixedCoinId:(0,k.tI)(d.coinId),blockchainId:d.id}])});return(0,e.jsx)($.J,{children:({open:d})=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.J.Button,{className:"outline-none",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{children:i?(0,e.jsx)(U.C,{name:i.name,size:H.m.XSMALL,src:i.iconUrl}):(0,e.jsx)(se,{colorClass:"text-iconNormal"})}),(0,e.jsx)("div",{className:"pl-2",children:i?(0,e.jsx)(N.x,{children:i.name}):(0,e.jsx)(N.x,{children:o({id:"component.blockchain-select.all-networks"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(Be.V,{colorClass:`text-iconNormal transition-transform ${d?"rotate-180":"rotate-0"}`})})]})}),(0,e.jsx)(Re.u,{as:a.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,e.jsx)($.J.Panel,{className:"absolute min-w-full mt-1 left-0 z-10 shadow-lg rounded bg-backgroundPrimary cursor-default",onClick:r=>r.stopPropagation(),children:({close:r})=>(0,e.jsx)("div",{className:"mr-1 pl-4 py-4 tw-scrollbar max-h-[250px]",children:(0,e.jsxs)("div",{className:"flex space-y-4 flex-col",children:[(0,e.jsx)(F.e,{onClick:()=>{h(null),r()},children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(se,{colorClass:"text-iconNormal"})}),(0,e.jsx)("div",{className:"pl-2 flex-grow",children:(0,e.jsx)(N.x,{weight:y.kx.NORMAL,theme:i?y.W5.PRIMARY:y.W5.BRAND,children:o({id:"component.blockchain-select.all-networks"})})}),(0,e.jsx)("div",{children:!i&&(0,e.jsx)(te.n,{colorClass:"text-primary"})})]})}),u.map(m=>(0,e.jsx)(F.e,{onClick:()=>{h(m),r()},children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(U.C,{name:m.name,size:H.m.XSMALL,src:m.iconUrl})}),(0,e.jsx)("div",{className:"pl-2 flex-grow",children:(0,e.jsx)(N.x,{weight:y.kx.NORMAL,theme:i?.id===m.id?y.W5.BRAND:y.W5.PRIMARY,children:m.name})}),(0,e.jsx)("div",{children:i?.id===m.id&&(0,e.jsx)(te.n,{colorClass:"text-primary"})})]})},m.id))]})})})})]})})};var Fe=Object.defineProperty,Ue=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,oe=(s,n,o)=>n in s?Fe(s,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[n]=o,Ke=(s,n)=>{for(var o in n||(n={}))$e.call(n,o)&&oe(s,o,n[o]);if(ne)for(var o of ne(n))Ge.call(n,o)&&oe(s,o,n[o]);return s},ze=(s,n)=>Ue(s,Ze(n));const Xe=({search:s,assets:n})=>s?n.filter(({symbol:o,name:l,address:u})=>u?.toLowerCase().includes(s.toLowerCase())||o.toLowerCase().includes(s.toLowerCase())||l.toLowerCase().includes(s.toLowerCase())):n,Ye=()=>{(0,He.d)({event:Z.pG.MANAGE_CRYPTO,props:null});const{formatMessage:s}=(0,M.Z)(),n=(0,J.s0)(),o=Ie(),[l,u]=(0,a.useState)(null),i=(0,a.useMemo)(()=>{var c;return(c=l?.map(({prefixedCoinId:T})=>T))!=null?c:null},[l]),h=(0,a.useMemo)(()=>{var c;return(c=l?.map(({blockchainId:T})=>T))!=null?c:null},[l]),[d,r]=(0,a.useState)(""),[m,O]=(0,a.useState)(!1),{flattenData:p,isFetching:I,setQuery:G,fetchNextPage:P,hasNextPage:le}=(0,de.e)(i),R=(0,a.useRef)(!1),re=(0,a.useMemo)(()=>Xe({search:d,assets:o}),[o,d]),Je=(0,a.useCallback)((0,E.debounce)(c=>{O(!0),G(c)},200),[]),K=()=>{n(v.Z.CUSTOM_ASSET_SELECT_NETWORK)},ce=(0,a.useMemo)(()=>p.map(c=>c.assetId),[p]),ie=(0,a.useMemo)(()=>new Map(o.map(c=>[c.assetId,c.isShownInHomeScreen])),[o]),z=(0,a.useMemo)(()=>[...re.filter(c=>!ce.includes(c.assetId)),...p.map(c=>ze(Ke({},c),{isShownInHomeScreen:c.isShownInHomeScreen||ie.get(c.assetId)}))].sort((c,T)=>c.isShownInHomeScreen!==T.isShownInHomeScreen?c.isShownInHomeScreen?-1:1:c.symbol.localeCompare(T.symbol)).filter(c=>!h||h.includes(c.blockchainId)),[re,ie,p,ce,h]);(0,a.useEffect)(()=>{if(I&&!R.current){R.current=!0;return}!I&&R.current&&(O(!1),R.current=!1)},[I]);const be=(0,a.useMemo)(()=>m?(0,e.jsx)(W.M,{children:(0,e.jsx)("div",{children:(0,e.jsx)(g.$,{size:H.m.XLARGE})})}):z.length===0?(0,e.jsx)(A.i,{message:s({id:"token-asset-list.empty-search-caption"})}):(0,e.jsxs)("div",{className:"mt-2",children:[(0,e.jsx)(De,{assets:z,hasNextPage:le,loadMoreItems:P}),(0,e.jsx)("div",{children:(0,e.jsx)(x.z,{testid:"import-asset-btn",theme:f.jM.TRANSPARENT,onClick:K,children:(0,e.jsx)(N.x,{theme:y.W5.BRAND,children:s({id:"manage-crypto.import-asset"})})})})]}),[m,z,le,P,K,s]);return(0,e.jsxs)(D._z,{children:[(0,e.jsx)(D.mr,{backAction:()=>n(v.Z.DEFAULT),title:s({id:"manage-crypto.title"}),infoAction:(0,e.jsx)(V,{testid:"import-asset-info-action",onClick:K})}),(0,e.jsxs)(D.xV,{children:[(0,e.jsx)(w.M,{testid:"search-asset-input",value:d,onChange:c=>{O(!0),r(c.target.value),Je(c.target.value)},placeholder:s({id:"component.input-asset-search.placeholder"})}),(0,e.jsx)("div",{className:"pt-2",children:(0,e.jsx)(We,{selectedNetworks:l,onSelect:u})}),be]})]})},ae=()=>(0,e.jsx)(C.P,{messageFileId:"app_src_popup_modules_home_locales",children:(0,e.jsx)(Ye,{})}),Qe=ae},74028:(B,S,t)=>{t.d(S,{M:()=>v});var e=t(85893),A=t(53706),C=t(42437);const v=({placeholder:x,value:f,disabled:j,onChange:E,autoFocus:a=!0,align:M=C.n5.LEFT,testid:L})=>(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:`search-field ${j?"bg-textDisabled pointer-events-none":""}`,children:[(0,e.jsx)("div",{className:"mr-1",children:(0,e.jsx)(A.W,{colorClass:"text-iconNormal"})}),(0,e.jsx)("input",{"data-testid":L,className:`block flex-1 outline-none bg-transparent title-text font-medium ${M}`,type:C.rC.TEXT,placeholder:x,spellCheck:!1,value:f,autoFocus:a,onChange:E})]})})},39635:(B,S,t)=>{t.d(S,{r:()=>C});var e=t(85893),A=t(77768);const C=({label:v,checked:x,testid:f,disabled:j,onChange:E})=>(0,e.jsxs)(A.r,{"data-testid":f,checked:x,onChange:E,className:`${x?"bg-primary":"bg-textDisabled"} switch-container ${j?"opacity-50":"opacity-100"}`,onClick:a=>a.stopPropagation(),disabled:j,children:[v&&(0,e.jsx)("span",{className:"sr-only",children:v}),(0,e.jsx)("span",{"aria-hidden":"true",className:`${x?"translate-x-5":"translate-x-0"} switch-toggle`})]})},36117:(B,S,t)=>{t.d(S,{e:()=>x});var e=t(98596),A=t(67294),C=t(59078),v=t(24044);function x(f){const[j,E]=(0,A.useState)(),{data:a,error:M,fetchNextPage:L,hasNextPage:V,isFetching:w,isFetchingNextPage:W,status:D}=(0,e.N)(["tokens",j,f],({pageParam:g=0})=>C.Tl.emit(v.Z.SEARCH_ASSETS,{query:j,networks:f,page:g}),{refetchOnWindowFocus:!1,getNextPageParam:g=>g?.nextPage}),H=(0,A.useMemo)(()=>(a?.pages||[]).flatMap(g=>g?.data||[]),[a?.pages]);return{setQuery:E,data:a,error:M,fetchNextPage:L,hasNextPage:V,isFetching:w,isFetchingNextPage:W,status:D,flattenData:H}}}}]);
