"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[169],{7169:(ne,O,t)=>{t.r(O),t.d(O,{App:()=>te,default:()=>Re});var e=t(85893),N=t(89250),V=t(13920),W=t(64064),C=t(82911),B=t(77767),I=t(44525),z=t(94061),X=t(84600),$=t(39746),le=t(19096),oe=t(37632),S=t(49756),f=t(83522),k=t(48161),p=t(48303),u=t(45618),D=t(59078),T=t(70473),U=t(74301),ae=t(87326),Y=t(12505),Q=t(28200),J=t(22751),d=t(67294),E=t(86896),ie=(n,c,l)=>new Promise((i,a)=>{var v=s=>{try{r(l.next(s))}catch(h){a(h)}},m=s=>{try{r(l.throw(s))}catch(h){a(h)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,m);r((l=l.apply(n,c)).next())});const ce=()=>{(0,z.d)({event:T.pG.SETTINGS_ADD_CUSTOM_NETWORK,props:null});const{formatMessage:n}=(0,E.Z)(),c=(0,N.s0)(),[l,i]=(0,d.useState)(!1),[a,v]=(0,d.useState)(""),[m,r]=(0,d.useState)(""),[s,h]=(0,d.useState)(""),[w,G]=(0,d.useState)(""),[j,A]=(0,d.useState)(""),{trackAnalytics:P}=(0,I.z)(),M=(0,X.J)({value:a}),R=(0,$.f)({value:m}),g=(0,ae.R)(!0),H=(0,Q.O)(!0),o=(0,Y.$)(!0),b=(0,d.useMemo)(()=>[...g,...H,...o],[g,o,H]),Z=(0,B.k)({value:s,rpcUrl:m,blockchains:b}),F=(0,X.J)({value:w}),K=(0,$.f)({value:j}),ge=(0,d.useMemo)(()=>Z.isValid&&M.isValid&&R.isValid&&F.isValid&&(!j||K.isValid),[Z.isValid,j,K.isValid,M.isValid,R.isValid,F.isValid]),se=(0,d.useRef)(!1),Oe=(0,d.useCallback)(x=>ie(void 0,null,function*(){x.preventDefault(),se.current=!0,i(!0);const Ve={id:(0,J.intToHex)(+s),name:a,symbol:w,decimals:18,chainId:(0,J.intToHex)(+s),explorer:{url:j},info:{rpc:m},coinId:+s,customTokensEnabled:!0,isDappCompatible:!0,isCustom:!0};yield D.Tl.emit(U.Z.ADD_DAPP_BLOCKCHAIN,Ve),P({event:T.ih.ADD_CUSTOM_NETWORK,props:{pageViewSource:T.pG.SETTINGS_ADD_CUSTOM_NETWORK,blockchainName:a,blockchainChainId:s}}),c(C.Z.NETWORK)}),[s,j,a,m,w,c]);return(0,e.jsx)(k._z,{children:(0,e.jsxs)(k.xV,{children:[(0,e.jsx)("div",{className:"flex my-11 justify-center",children:(0,e.jsx)(V.Y,{})}),(0,e.jsxs)("div",{className:"bg-backgroundPrimary border border-line rounded p-6",children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-4 text-center",children:[(0,e.jsx)(p.x,{type:u.Xi.HEADLINE,children:n({id:"modal-add-network.title"})}),(0,e.jsx)(p.x,{type:u.Xi.TITLE,theme:u.W5.SECONDARY,weight:u.kx.NORMAL,children:n({id:"modal-add-network.subtitle"})})]}),(0,e.jsxs)("div",{className:"flex flex-col space-y-6 mt-6",children:[(0,e.jsx)(f.o,{testid:"custom-network-name",value:a,onChange:x=>v(x.target.value),label:n({id:"input-network-name.placeholder"}),validation:M,autoFocus:!0}),(0,e.jsx)(f.o,{testid:"custom-network-rpcUrl",value:m,onChange:x=>r(x.target.value),label:n({id:"input-rpc-url.placeholder"}),validation:R}),(0,e.jsx)(f.o,{testid:"custom-network-chainId",value:s,onChange:x=>h(x.target.value),label:n({id:"input-chain-id.placeholder"}),validation:se.current?void 0:Z}),(0,e.jsx)(f.o,{testid:"custom-network-currency-symbol",value:w,onChange:x=>G(x.target.value),label:n({id:"input-currency-symbol.placeholder"}),validation:F,subtitle:n({id:"input-currency-symbol.description"}),showSubtitleOnFocus:!0}),(0,e.jsx)(f.o,{testid:"custom-network-explorerUrl",value:j,onChange:x=>A(x.target.value),label:n({id:"input-explorer-url.placeholder"}),validation:j?K:void 0}),(0,e.jsxs)(le.b,{theme:oe.q.WARNING,children:[(0,e.jsx)(p.x,{testid:"custom-network-warning-title",weight:u.kx.SEMIBOLD,theme:u.W5.WARNING,children:n({id:"modal-add-network.warning.title"})}),(0,e.jsx)(p.x,{testid:"custom-network-warning-description",theme:u.W5.WARNING,children:n({id:"modal-add-network.warning.description"})})]}),(0,e.jsx)(S.z,{testid:"custom-network-add-button",disabled:!ge,loading:l,onClick:Oe,children:n({id:"modal-add-network.btn-add-network"})})]})]})]})})},de=()=>(0,e.jsx)(W.P,{messageFileId:"app_src_popup_modules_network_locales",children:(0,e.jsx)(ce,{})});var q=t(44645),re=t(1942),_=t(63118),he=t(83954),me=t(60200),ue=t(88813),ve=t(99244),xe=t(32193);const L=({name:n,iconUrl:c,selected:l,onClick:i,onRemove:a})=>(0,e.jsx)(he.Z,{noPadding:!0,"data-testid":"network-item",children:(0,e.jsx)(re.e,{testid:"network-row",onClick:i,children:(0,e.jsxs)("div",{className:"flex items-center justify-between py-2.5 px-4",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,e.jsx)(ve.C,{name:n,src:c,size:xe.m.LARGE,abstractFallback:!0}),(0,e.jsx)(p.x,{testid:"network-row-name",type:u.Xi.TITLE,theme:l?u.W5.BRAND:u.W5.PRIMARY,children:n})]}),l&&(0,e.jsx)("div",{children:(0,e.jsx)(ue.n,{colorClass:"text-primary"})}),a&&!l&&(0,e.jsx)("div",{children:(0,e.jsx)(S.z,{testid:"network-row-delete-button",theme:_.jM.TRANSPARENT,noPadding:!0,onClick:a,children:(0,e.jsx)(me.Q,{width:20,height:20,colorClass:"text-iconNormal hover:text-textPrimary transition"})})})]})})});var ee=t(33500),pe=(n,c,l)=>new Promise((i,a)=>{var v=s=>{try{r(l.next(s))}catch(h){a(h)}},m=s=>{try{r(l.throw(s))}catch(h){a(h)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,m);r((l=l.apply(n,c)).next())});const Te=({blockchain:n,opened:c,onClose:l})=>{const{formatMessage:i}=(0,E.Z)(),{trackAnalytics:a}=(0,I.z)(),v=(0,d.useCallback)(()=>pe(void 0,null,function*(){yield D.Tl.emit(U.Z.REMOVE_BLOCKCHAIN,n.id),a({event:T.ih.REMOVE_CUSTOM_NETWORK,props:{pageViewSource:T.pG.SETTINGS_NETWORKS,blockchainName:n.name,blockchainChainId:n.chainId}}),l()}),[n.id,l]);return(0,e.jsx)(ee.u,{title:i({id:"modal-remove-network.title"}),opened:c,onClose:l,children:(0,e.jsxs)("div",{className:"flex flex-col text-center space-y-4",children:[(0,e.jsx)(p.x,{type:u.Xi.HEADER,children:n.name}),(0,e.jsx)(p.x,{children:i({id:"modal-remove-network.description"},{networkName:n.name})}),(0,e.jsx)(S.z,{testid:"network-delete-modal-confirm-button",theme:_.jM.DANGER,onClick:v,children:i({id:"generic.delete"})})]})})};var y=t(44180),je=(n,c,l)=>new Promise((i,a)=>{var v=s=>{try{r(l.next(s))}catch(h){a(h)}},m=s=>{try{r(l.throw(s))}catch(h){a(h)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,m);r((l=l.apply(n,c)).next())});const Ne=({blockchain:n,opened:c,onClose:l})=>{const{trackAnalytics:i}=(0,I.z)(),{formatMessage:a}=(0,E.Z)(),v=(0,d.useCallback)(()=>je(void 0,null,function*(){yield D.Tl.emit(U.Z.SWITCH_BLOCKCHAIN,{blockchainId:n.id,blockchainType:y.F.TEST}),i({event:T.ih.SWITCH_NETWORK,props:{pageViewSource:T.pG.SETTINGS_NETWORKS,blockchainName:n.name,blockchainType:y.F.TEST,blockchainChainId:n.chainId}}),l()}),[n.id,l,i]);return(0,e.jsx)(ee.u,{title:a({id:"modal-switch-to-test-network.title"}),opened:c,onClose:l,children:(0,e.jsxs)("div",{className:"flex flex-col space-y-4",children:[a({id:"modal-switch-to-test-network.description"},{p:m=>(0,e.jsx)(p.x,{children:m})}),(0,e.jsx)(S.z,{onClick:v,children:a({id:"generic.confirm"})})]})})};var ke=t(73969),ye=t(90538),we=t(75932),Ce=t(38195),Ie=t(96486),Se=t(81599),fe=(n,c,l)=>new Promise((i,a)=>{var v=s=>{try{r(l.next(s))}catch(h){a(h)}},m=s=>{try{r(l.throw(s))}catch(h){a(h)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(v,m);r((l=l.apply(n,c)).next())});const Ee=()=>{const{formatMessage:n}=(0,E.Z)(),{trackAnalytics:c}=(0,I.z)(),[l,i]=(0,ye.d)(),a=(0,ke.G)(!0),v=(0,Q.O)(!0),m=(0,d.useMemo)(()=>v.filter(o=>o.id!==Se.$.tbinance),[]),r=(0,Y.$)(!0),{areTestnetsEnabled:s}=(0,we.t)(),[h,w]=(0,d.useState)(!1),[G,j]=(0,d.useState)(!1),[A,P]=(0,d.useState)(null),M=(0,d.useCallback)(o=>{P(o),w(!0)},[]),R=(0,d.useCallback)(o=>{P(o),j(!0)},[]),g=(0,d.useCallback)((o,b)=>fe(void 0,null,function*(){yield D.Tl.emit(U.Z.SWITCH_BLOCKCHAIN,{blockchainId:o.id,blockchainType:b}),c({event:T.ih.SWITCH_NETWORK,props:{pageViewSource:T.pG.SETTINGS_NETWORKS,blockchainName:o.name,blockchainType:b,blockchainChainId:o.chainId}})}),[c]),[H]=(0,Ie.partition)(a,o=>o.blockchain.toLowerCase()!==Ce.G1.solana);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("ul",{className:`space-y-4 ${s?"":"mb-4"}`,children:[H.map(o=>(0,e.jsx)("li",{"data-testid":"main-networks-list",children:(0,e.jsx)(L,{name:o.name,iconUrl:o.iconUrl,selected:o.id===l&&i===y.F.MAIN,onClick:()=>g(o,y.F.MAIN)})},o.chainId)),r.map(o=>(0,e.jsx)("li",{"data-testid":"custom-networks-list",children:(0,e.jsx)(L,{name:o.name,iconUrl:o.iconUrl,selected:o.id===l&&i===y.F.CUSTOM,onClick:()=>g(o,y.F.CUSTOM),onRemove:()=>M(o)})},o.chainId))]}),s&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"mt-6 mb-4",children:[(0,e.jsxs)("div",{className:"flex flex-col mb-4 space-y-2",children:[(0,e.jsx)(p.x,{type:u.Xi.TITLE,children:n({id:"network.test.title"})}),(0,e.jsx)(p.x,{type:u.Xi.TITLE,weight:u.kx.NORMAL,theme:u.W5.SECONDARY,children:n({id:"network.test.tooltip"})})]}),(0,e.jsx)("ul",{className:"space-y-4",children:m.map(o=>(0,e.jsx)("li",{children:(0,e.jsx)(L,{name:o.name,iconUrl:o.iconUrl,selected:o.id===l&&i===y.F.TEST,onClick:()=>R(o)})},o.chainId))})]})}),A&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te,{opened:h,onClose:()=>w(!1),blockchain:A}),(0,e.jsx)(Ne,{opened:G,onClose:()=>j(!1),blockchain:A})]})]})},Ae=()=>{(0,z.d)({event:T.pG.SETTINGS_NETWORKS,props:null});const{formatMessage:n}=(0,E.Z)(),c=(0,N.s0)(),l=(0,d.useCallback)(()=>{const i=C.Z.CUSTOM_NETWORK;if((0,q.QM)())return(0,q.YQ)(i);c(i)},[c]);return(0,e.jsxs)(k._z,{children:[(0,e.jsx)(k.mr,{title:n({id:"generic.network"}),backAction:()=>c(C.Z.SETTINGS)}),(0,e.jsx)(k.xV,{children:(0,e.jsx)(k.Wo,{children:(0,e.jsx)(Ee,{})})}),(0,e.jsx)(k.WA,{children:(0,e.jsx)(S.z,{testid:"networks-add-network-button",onClick:l,children:n({id:"network.btn-custom-network"})})})]})},Me=()=>(0,e.jsx)(W.P,{messageFileId:"app_src_popup_modules_network_locales",children:(0,e.jsx)(Ae,{})}),te=()=>(0,e.jsxs)(N.Z5,{children:[(0,e.jsx)(N.AW,{index:!0,element:(0,e.jsx)(Me,{})}),(0,e.jsx)(N.AW,{path:"/custom",element:(0,e.jsx)(de,{})})]}),Re=te},60200:(ne,O,t)=>{t.d(O,{Q:()=>W});var e=t(85893);const N=24,V=24,W=({width:C,height:B,colorClass:I})=>(0,e.jsxs)("svg",{className:I,fill:"none",width:C??N,height:B??V,viewBox:`0 0 ${N} ${V}`,xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("rect",{x:"3",y:"4",width:"18",height:"3",fill:"currentColor"}),(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 2H9V4H15V2ZM19 7H5V21H19V7ZM10.5 9H8V18H10.5V9ZM13.5 9H16V18H13.5V9Z",fill:"currentColor"})]})}}]);
