"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[850],{62340:(ge,Z,n)=>{n.d(Z,{A:()=>X,e:()=>be});var t=n(85893),j=n(19096),G=n(37632),K=n(49756),x=n(63118),m=n(89431),u=n(78958),P=n(83522),O=n(42437),E=n(59995),_=n(48303),H=n(45618),S=n(67294),ue=n(86896);const re=[12,24],X=6,be=({validation:ce,onChange:L,onWordCountChange:de,isImporting:Pe})=>{const{formatMessage:D}=(0,ue.Z)(),[Ee,J]=(0,S.useState)(!0),[k,le]=(0,S.useState)([]),ne=(0,S.useMemo)(()=>re.map(B=>({id:B,name:D({id:"component.input-seed-phrase.select.placeholder"},{number:B})})),[]),[pe,C]=(0,S.useState)(ne[0]),g=pe.id,[Oe,Re]=(0,S.useState)(null),ye=(0,S.useCallback)((B,q)=>{B.preventDefault();const A=[...k];A[q]=B.target.value.trim(),J(!1),le(A),L(A.join(" "))},[L,k]),Ie=(0,S.useCallback)((B,q)=>{B.preventDefault(),J(!1);const A=B.clipboardData.getData("text").trim(),ee=A.split(" ");if(A&&(ee.length===12&&g===12||ee.length===24&&g===24))le(ee),L(A);else{const w=[...k];w[q]=A,le(w),L(w.join(" "))}},[g,L,k]),xe=()=>{le([]),J(!1),L("")};return(0,S.useEffect)(()=>{le([]),de?.(pe.id)},[pe.id,de]),(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-6","data-testid":"secret-phrase-select",children:[(0,t.jsx)("div",{className:"flex w-full max-w-[372px]",children:(0,t.jsx)(E.P,{options:ne,selected:pe,setSelected:B=>C(B)})}),(0,t.jsx)("div",{className:`grid ${g===12?"grid-cols-2":"grid-cols-4"} gap-1`,children:Array.from({length:g/X}).map((B,q)=>(0,t.jsx)("div",{children:Array.from({length:X}).map((A,ee)=>{var w;const W=ee+q*X;return(0,t.jsx)(P.o,{prefix:`${W+1}.`,value:(w=k[W])!=null?w:"",onChange:se=>ye(se,W),onPaste:se=>Ie(se,W),placeholder:`Word #${W+1}`,type:Oe===W?O.rC.TEXT:O.rC.PASSWORD,autoFocus:W===0,actions:[{key:"show-password",placeholder:Oe===W?(0,t.jsx)(u.h,{colorClass:"text-iconNormal"}):(0,t.jsx)(m.v,{colorClass:"text-iconNormal"}),onClick:()=>Re(se=>se===W?null:W)}]},W)})},q))}),(0,t.jsx)("div",{children:(0,t.jsx)(K.z,{theme:x.jM.TRANSPARENT,disabled:!k.length||Pe,noPadding:!0,onClick:xe,children:(0,t.jsx)(_.x,{theme:H.W5.BRAND,type:H.Xi.TITLE,children:D({id:"component.select-seed-phrase.clear-all"})})})}),!Ee&&!ce.isValid&&(0,t.jsx)("div",{className:"w-full text-start",children:(0,t.jsx)(j.b,{theme:G.q.WARNING,children:ce.error})})]})}},44850:(ge,Z,n)=>{n.r(Z),n.d(Z,{default:()=>je});var t=n(85893),j=n(23897),G=n(11187),K=n(44525),x=n(94061),m=n(66012),u=n(11e3),P=n(88955),O=n(2153),E=n(67294),_=n(86896),H=Object.defineProperty,S=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ce=(v,d,f)=>d in v?H(v,d,{enumerable:!0,configurable:!0,writable:!0,value:f}):v[d]=f,L=(v,d)=>{for(var f in d||(d={}))X.call(d,f)&&ce(v,f,d[f]);if(re)for(var f of re(d))be.call(d,f)&&ce(v,f,d[f]);return v},de=(v,d)=>S(v,ue(d));const Pe=({value:v,selectedWordCount:d})=>{var f,Y,oe;const $={length:!1,mnemonic:!1};if(!v)return de(L({},$),{isValid:!1});const fe=(oe=(Y=(f=v?.match(/\w+/g))==null?void 0:f.join(" ").split(new RegExp("\\s")))==null?void 0:Y.length)!=null?oe:0;return v&&(fe===12&&d===12||fe===24&&d===24)&&($.length=!0,$.mnemonic=O.validateMnemonic(v)),de(L({},$),{isValid:!Object.entries($).some(([ae,V])=>!V)})},D=({value:v,selectedWordCount:d})=>{const{formatMessage:f}=(0,_.Z)(),[Y,oe]=(0,E.useState)({isValid:!1,length:!1,mnemonic:!1});(0,E.useEffect)(()=>{oe(L({},Pe({value:v,selectedWordCount:d})))},[v,d]);const $=(0,E.useMemo)(()=>{if(!Y.length)return f({id:"validate-seed-phrase.length"});if(!Y.mnemonic)return f({id:"validate-seed-phrase.generic"})},[f,Y]);return{isValid:Y.isValid,error:$}};var Ee=n(62340),J=n(39881),k=n(19096),le=n(37632),ne=n(48161),pe=n(48407),C=n(59078),g=n(70473),Oe=n(59729),Re=n(12790),ye=n(61813),Ie=(v,d,f)=>new Promise((Y,oe)=>{var $=V=>{try{ae(f.next(V))}catch(ie){oe(ie)}},fe=V=>{try{ae(f.throw(V))}catch(ie){oe(ie)}},ae=V=>V.done?Y(V.value):Promise.resolve(V.value).then($,fe);ae((f=f.apply(v,d)).next())});const xe=({setCurrentStep:v})=>{const{formatMessage:d}=(0,_.Z)();(0,x.d)({event:g.pG.ONBOARDING_IMPORT_MNEMONIC,props:null});const{trackAnalytics:f,isAnalyticsEnabled:Y}=(0,K.z)(),{setCurrentFlow:oe}=(0,P.A)(),{update:$,data:{password:fe}}=(0,E.useContext)(G.t),[ae,V]=(0,E.useState)(!1),[ie,Se]=(0,E.useState)(""),[e,l]=(0,E.useState)(""),[r,s]=(0,E.useState)(12),i=D({value:e,selectedWordCount:r}),o=i.isValid,a=r!==12,p=M=>Ie(void 0,null,function*(){if(M.preventDefault(),!!o)try{V(!0),yield C.Tl.emit(Oe.Z.IMPORT_MNEMONIC,{password:fe,mnemonic:e}),$({password:""}),f({event:g.ih.WALLET_CREATED,forceTracking:Y===null,props:{pageViewSource:g.pG.ONBOARDING_IMPORT_MNEMONIC,walletType:pe.S.MNEMONIC,mnemonicLength:e.split(" ").length}}),v(J.Af.ACCEPT_ANALYTICS)}catch(R){ye.Z.error(R),R?.message==="MNEMONIC_ALREADY_EXISTS"?Se(d({id:"import-wallet.seed-phrase.duplicated"})):Se(R?.message),V(!1)}}),y=()=>{oe(J.j6.HOME)};return(0,E.useEffect)(()=>{ie&&Se("")},[e]),(0,t.jsx)(ne._z,{loose:a,children:(0,t.jsx)("div",{className:a?"max-w-[800px] mx-auto":"",children:(0,t.jsx)(u.C,{heading:d({id:"import-seed-phrase.heading"}),activeTab:2,loose:a,children:(0,t.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,t.jsx)(Ee.e,{onWordCountChange:s,onChange:l,validation:i,isImporting:ae}),ie&&(0,t.jsx)(k.b,{theme:le.q.WARNING,children:ie}),(0,t.jsx)(m.N,{buttonCancelProps:{onClick:y,disabled:ae},buttonSubmitProps:{disabled:!o,loading:ae,onClick:Re.G1}})]})})})})};var B=Object.defineProperty,q=Object.defineProperties,A=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,se=(v,d,f)=>d in v?B(v,d,{enumerable:!0,configurable:!0,writable:!0,value:f}):v[d]=f,Ce=(v,d)=>{for(var f in d||(d={}))w.call(d,f)&&se(v,f,d[f]);if(ee)for(var f of ee(d))W.call(d,f)&&se(v,f,d[f]);return v},Ae=(v,d)=>q(v,A(d));const Ne=Ae(Ce({},j.globalSteps),{[J.Af.IMPORT_SEED_PHRASE]:xe}),je=()=>{const[v,d]=(0,E.useState)(J.Af.CREATE_VERIFY_PASSWORD),f=Ne[v];return(0,t.jsx)(f,{setCurrentStep:d})}},59995:(ge,Z,n)=>{n.d(Z,{P:()=>O});var t=n(85893),j=n(88813),G=n(73748),K=n(48303),x=n(45618),m=n(75498),u=n(47031),P=n(67294);const O=({options:E,selected:_,setSelected:H,label:S,testid:ue})=>(0,t.jsxs)("div",{className:"w-full",children:[S&&(0,t.jsx)(K.x,{children:S}),(0,t.jsx)(m.R,{value:_,by:"id",onChange:H,children:(0,t.jsxs)("div",{className:"relative w-full mt-1",children:[(0,t.jsxs)(m.R.Button,{"data-testid":ue,className:"relative w-full cursor-default input-field title-text font-medium h-12",children:[(0,t.jsx)("span",{className:"block truncate",children:_.name}),(0,t.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,t.jsx)(G.v,{colorClass:"text-iconNormal"})})]}),(0,t.jsx)(u.u,{as:P.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,t.jsx)(m.R.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded bg-bg3 py-1 shadow-lg focus:outline-none",children:E.map(re=>(0,t.jsx)(m.R.Option,{"data-testid":`${ue}-option`,className:"relative cursor-default select-none px-4 py-2",value:re,children:({selected:X})=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"flex flex-1",children:(0,t.jsx)(K.x,{type:x.Xi.TITLE,theme:X?x.W5.BRAND:x.W5.PRIMARY,truncated:!0,children:re.name})}),X&&(0,t.jsx)("div",{children:(0,t.jsx)(j.n,{colorClass:"text-primary"})})]})},re.id))})})]})})]})},75498:(ge,Z,n)=>{n.d(Z,{R:()=>Se});var t=n(67294),j=n(16723),G=n(3855);function K(e,l){let[r,s]=(0,t.useState)(e),i=(0,G.E)(e);return(0,j.e)(()=>s(i.current),[i,s,...l]),r}var x=n(31147),m=n(85563),u=n(73781),P=n(19946),O=n(43986),E=n(14157),_=n(23784);let H=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function S(e){var l,r;let s=(l=e.innerText)!=null?l:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return s;let o=!1;for(let p of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))p.remove(),o=!0;let a=o?(r=i.innerText)!=null?r:"":s;return H.test(a)&&(a=a.replace(H,"")),a}function ue(e){let l=e.getAttribute("aria-label");if(typeof l=="string")return l.trim();let r=e.getAttribute("aria-labelledby");if(r){let s=r.split(" ").map(i=>{let o=document.getElementById(i);if(o){let a=o.getAttribute("aria-label");return typeof a=="string"?a.trim():S(o).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return S(e).trim()}function re(e){let l=(0,t.useRef)(""),r=(0,t.useRef)("");return(0,u.z)(()=>{let s=e.current;if(!s)return"";let i=s.innerText;if(l.current===i)return r.current;let o=ue(s).trim().toLowerCase();return l.current=i,r.current=o,o})}function X(e){return[e.screenX,e.screenY]}function be(){let e=(0,t.useRef)([-1,-1]);return{wasMoved(l){let r=X(l);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(l){e.current=X(l)}}}var ce=n(46045),L=n(16567),de=n(64103);function Pe(e){throw new Error("Unexpected object: "+e)}var D=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(D||{});function Ee(e,l){let r=l.resolveItems();if(r.length<=0)return null;let s=l.resolveActiveIndex(),i=s??-1;switch(e.focus){case 0:{for(let o=0;o<r.length;++o)if(!l.resolveDisabled(r[o],o,r))return o;return s}case 1:{for(let o=i-1;o>=0;--o)if(!l.resolveDisabled(r[o],o,r))return o;return s}case 2:{for(let o=i+1;o<r.length;++o)if(!l.resolveDisabled(r[o],o,r))return o;return s}case 3:{for(let o=r.length-1;o>=0;--o)if(!l.resolveDisabled(r[o],o,r))return o;return s}case 4:{for(let o=0;o<r.length;++o)if(l.resolveId(r[o],o,r)===e.id)return o;return s}case 5:return null;default:Pe(e)}}var J=n(9362),k=n(84575),le=n(18689),ne=n(32984),pe=n(15466),C=n(12351),g=n(61363),Oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Oe||{}),Re=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Re||{}),ye=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ye||{}),Ie=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ie||{});function xe(e,l=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=(0,k.z2)(l(e.options.slice()),o=>o.dataRef.current.domRef.current),i=r?s.indexOf(r):null;return i===-1&&(i=null),{options:s,activeOptionIndex:i}}let B={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let l=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,s=e.options.findIndex(i=>r(i.dataRef.current.value));return s!==-1&&(l=s),{...e,listboxState:0,activeOptionIndex:l}},2(e,l){var r;if(e.dataRef.current.disabled||e.listboxState===1)return e;let s=xe(e),i=Ee(l,{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...e,...s,searchQuery:"",activeOptionIndex:i,activationTrigger:(r=l.trigger)!=null?r:1}},3:(e,l)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=e.searchQuery!==""?0:1,s=e.searchQuery+l.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find(a=>{var p;return!a.dataRef.current.disabled&&((p=a.dataRef.current.textValue)==null?void 0:p.startsWith(s))}),o=i?e.options.indexOf(i):-1;return o===-1||o===e.activeOptionIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeOptionIndex:o,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,l)=>{let r={id:l.id,dataRef:l.dataRef},s=xe(e,i=>[...i,r]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(l.dataRef.current.value)&&(s.activeOptionIndex=s.options.indexOf(r)),{...e,...s}},6:(e,l)=>{let r=xe(e,s=>{let i=s.findIndex(o=>o.id===l.id);return i!==-1&&s.splice(i,1),s});return{...e,...r,activationTrigger:1}},7:(e,l)=>({...e,labelId:l.id})},q=(0,t.createContext)(null);q.displayName="ListboxActionsContext";function A(e){let l=(0,t.useContext)(q);if(l===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,A),r}return l}let ee=(0,t.createContext)(null);ee.displayName="ListboxDataContext";function w(e){let l=(0,t.useContext)(ee);if(l===null){let r=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,w),r}return l}function W(e,l){return(0,ne.E)(l.type,B,e,l)}let se=t.Fragment;function Ce(e,l){let{value:r,defaultValue:s,form:i,name:o,onChange:a,by:p=(h,b)=>h===b,disabled:y=!1,horizontal:M=!1,multiple:R=!1,...te}=e;const he=M?"horizontal":"vertical";let ve=(0,_.T)(l),[F=R?[]:void 0,Q]=(0,x.q)(r,a,s),[T,c]=(0,t.useReducer)(W,{dataRef:(0,t.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),N=(0,t.useRef)({static:!1,hold:!1}),De=(0,t.useRef)(null),Me=(0,t.useRef)(null),_e=(0,t.useRef)(null),U=(0,u.z)(typeof p=="string"?(h,b)=>{let z=p;return h?.[z]===b?.[z]}:p),me=(0,t.useCallback)(h=>(0,ne.E)(I.mode,{1:()=>F.some(b=>U(b,h)),0:()=>U(F,h)}),[F]),I=(0,t.useMemo)(()=>({...T,value:F,disabled:y,mode:R?1:0,orientation:he,compare:U,isSelected:me,optionsPropsRef:N,labelRef:De,buttonRef:Me,optionsRef:_e}),[F,y,R,T]);(0,j.e)(()=>{T.dataRef.current=I},[I]),(0,O.O)([I.buttonRef,I.optionsRef],(h,b)=>{var z;c({type:1}),(0,k.sP)(b,k.tJ.Loose)||(h.preventDefault(),(z=I.buttonRef.current)==null||z.focus())},I.listboxState===0);let Ue=(0,t.useMemo)(()=>({open:I.listboxState===0,disabled:y,value:F}),[I,y,F]),ze=(0,u.z)(h=>{let b=I.options.find(z=>z.id===h);b&&Be(b.dataRef.current.value)}),Ke=(0,u.z)(()=>{if(I.activeOptionIndex!==null){let{dataRef:h,id:b}=I.options[I.activeOptionIndex];Be(h.current.value),c({type:2,focus:D.Specific,id:b})}}),we=(0,u.z)(()=>c({type:0})),Ve=(0,u.z)(()=>c({type:1})),Ge=(0,u.z)((h,b,z)=>h===D.Specific?c({type:2,focus:D.Specific,id:b,trigger:z}):c({type:2,focus:h,trigger:z})),Ye=(0,u.z)((h,b)=>(c({type:5,id:h,dataRef:b}),()=>c({type:6,id:h}))),$e=(0,u.z)(h=>(c({type:7,id:h}),()=>c({type:7,id:null}))),Be=(0,u.z)(h=>(0,ne.E)(I.mode,{0(){return Q?.(h)},1(){let b=I.value.slice(),z=b.findIndex(Le=>U(Le,h));return z===-1?b.push(h):b.splice(z,1),Q?.(b)}})),Qe=(0,u.z)(h=>c({type:3,value:h})),Ze=(0,u.z)(()=>c({type:4})),He=(0,t.useMemo)(()=>({onChange:Be,registerOption:Ye,registerLabel:$e,goToOption:Ge,closeListbox:Ve,openListbox:we,selectActiveOption:Ke,selectOption:ze,search:Qe,clearSearch:Ze}),[]),Xe={ref:ve},Te=(0,t.useRef)(null),Je=(0,m.G)();return(0,t.useEffect)(()=>{Te.current&&s!==void 0&&Je.addEventListener(Te.current,"reset",()=>{Q?.(s)})},[Te,Q]),t.createElement(q.Provider,{value:He},t.createElement(ee.Provider,{value:I},t.createElement(L.up,{value:(0,ne.E)(I.listboxState,{0:L.ZM.Open,1:L.ZM.Closed})},o!=null&&F!=null&&(0,le.t)({[o]:F}).map(([h,b],z)=>t.createElement(ce._,{features:ce.A.Hidden,ref:z===0?Le=>{var Fe;Te.current=(Fe=Le?.closest("form"))!=null?Fe:null}:void 0,...(0,C.oA)({key:h,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,name:h,value:b})})),(0,C.sY)({ourProps:Xe,theirProps:te,slot:Ue,defaultTag:se,name:"Listbox"}))))}let Ae="button";function Ne(e,l){var r;let s=(0,P.M)(),{id:i=`headlessui-listbox-button-${s}`,...o}=e,a=w("Listbox.Button"),p=A("Listbox.Button"),y=(0,_.T)(a.buttonRef,l),M=(0,m.G)(),R=(0,u.z)(T=>{switch(T.key){case g.R.Space:case g.R.Enter:case g.R.ArrowDown:T.preventDefault(),p.openListbox(),M.nextFrame(()=>{a.value||p.goToOption(D.First)});break;case g.R.ArrowUp:T.preventDefault(),p.openListbox(),M.nextFrame(()=>{a.value||p.goToOption(D.Last)});break}}),te=(0,u.z)(T=>{switch(T.key){case g.R.Space:T.preventDefault();break}}),he=(0,u.z)(T=>{if((0,de.P)(T.currentTarget))return T.preventDefault();a.listboxState===0?(p.closeListbox(),M.nextFrame(()=>{var c;return(c=a.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})})):(T.preventDefault(),p.openListbox())}),ve=K(()=>{if(a.labelId)return[a.labelId,i].join(" ")},[a.labelId,i]),F=(0,t.useMemo)(()=>({open:a.listboxState===0,disabled:a.disabled,value:a.value}),[a]),Q={ref:y,id:i,type:(0,E.f)(e,a.buttonRef),"aria-haspopup":"listbox","aria-controls":(r=a.optionsRef.current)==null?void 0:r.id,"aria-expanded":a.listboxState===0,"aria-labelledby":ve,disabled:a.disabled,onKeyDown:R,onKeyUp:te,onClick:he};return(0,C.sY)({ourProps:Q,theirProps:o,slot:F,defaultTag:Ae,name:"Listbox.Button"})}let We="label";function je(e,l){let r=(0,P.M)(),{id:s=`headlessui-listbox-label-${r}`,...i}=e,o=w("Listbox.Label"),a=A("Listbox.Label"),p=(0,_.T)(o.labelRef,l);(0,j.e)(()=>a.registerLabel(s),[s]);let y=(0,u.z)(()=>{var R;return(R=o.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})}),M=(0,t.useMemo)(()=>({open:o.listboxState===0,disabled:o.disabled}),[o]);return(0,C.sY)({ourProps:{ref:p,id:s,onClick:y},theirProps:i,slot:M,defaultTag:We,name:"Listbox.Label"})}let v="ul",d=C.AN.RenderStrategy|C.AN.Static;function f(e,l){var r;let s=(0,P.M)(),{id:i=`headlessui-listbox-options-${s}`,...o}=e,a=w("Listbox.Options"),p=A("Listbox.Options"),y=(0,_.T)(a.optionsRef,l),M=(0,m.G)(),R=(0,m.G)(),te=(0,L.oJ)(),he=(()=>te!==null?(te&L.ZM.Open)===L.ZM.Open:a.listboxState===0)();(0,t.useEffect)(()=>{var c;let N=a.optionsRef.current;N&&a.listboxState===0&&N!==((c=(0,pe.r)(N))==null?void 0:c.activeElement)&&N.focus({preventScroll:!0})},[a.listboxState,a.optionsRef]);let ve=(0,u.z)(c=>{switch(R.dispose(),c.key){case g.R.Space:if(a.searchQuery!=="")return c.preventDefault(),c.stopPropagation(),p.search(c.key);case g.R.Enter:if(c.preventDefault(),c.stopPropagation(),a.activeOptionIndex!==null){let{dataRef:N}=a.options[a.activeOptionIndex];p.onChange(N.current.value)}a.mode===0&&(p.closeListbox(),(0,J.k)().nextFrame(()=>{var N;return(N=a.buttonRef.current)==null?void 0:N.focus({preventScroll:!0})}));break;case(0,ne.E)(a.orientation,{vertical:g.R.ArrowDown,horizontal:g.R.ArrowRight}):return c.preventDefault(),c.stopPropagation(),p.goToOption(D.Next);case(0,ne.E)(a.orientation,{vertical:g.R.ArrowUp,horizontal:g.R.ArrowLeft}):return c.preventDefault(),c.stopPropagation(),p.goToOption(D.Previous);case g.R.Home:case g.R.PageUp:return c.preventDefault(),c.stopPropagation(),p.goToOption(D.First);case g.R.End:case g.R.PageDown:return c.preventDefault(),c.stopPropagation(),p.goToOption(D.Last);case g.R.Escape:return c.preventDefault(),c.stopPropagation(),p.closeListbox(),M.nextFrame(()=>{var N;return(N=a.buttonRef.current)==null?void 0:N.focus({preventScroll:!0})});case g.R.Tab:c.preventDefault(),c.stopPropagation();break;default:c.key.length===1&&(p.search(c.key),R.setTimeout(()=>p.clearSearch(),350));break}}),F=K(()=>{var c;return(c=a.buttonRef.current)==null?void 0:c.id},[a.buttonRef.current]),Q=(0,t.useMemo)(()=>({open:a.listboxState===0}),[a]),T={"aria-activedescendant":a.activeOptionIndex===null||(r=a.options[a.activeOptionIndex])==null?void 0:r.id,"aria-multiselectable":a.mode===1?!0:void 0,"aria-labelledby":F,"aria-orientation":a.orientation,id:i,onKeyDown:ve,role:"listbox",tabIndex:0,ref:y};return(0,C.sY)({ourProps:T,theirProps:o,slot:Q,defaultTag:v,features:d,visible:he,name:"Listbox.Options"})}let Y="li";function oe(e,l){let r=(0,P.M)(),{id:s=`headlessui-listbox-option-${r}`,disabled:i=!1,value:o,...a}=e,p=w("Listbox.Option"),y=A("Listbox.Option"),M=p.activeOptionIndex!==null?p.options[p.activeOptionIndex].id===s:!1,R=p.isSelected(o),te=(0,t.useRef)(null),he=re(te),ve=(0,G.E)({disabled:i,value:o,domRef:te,get textValue(){return he()}}),F=(0,_.T)(l,te);(0,j.e)(()=>{if(p.listboxState!==0||!M||p.activationTrigger===0)return;let U=(0,J.k)();return U.requestAnimationFrame(()=>{var me,I;(I=(me=te.current)==null?void 0:me.scrollIntoView)==null||I.call(me,{block:"nearest"})}),U.dispose},[te,M,p.listboxState,p.activationTrigger,p.activeOptionIndex]),(0,j.e)(()=>y.registerOption(s,ve),[ve,s]);let Q=(0,u.z)(U=>{if(i)return U.preventDefault();y.onChange(o),p.mode===0&&(y.closeListbox(),(0,J.k)().nextFrame(()=>{var me;return(me=p.buttonRef.current)==null?void 0:me.focus({preventScroll:!0})}))}),T=(0,u.z)(()=>{if(i)return y.goToOption(D.Nothing);y.goToOption(D.Specific,s)}),c=be(),N=(0,u.z)(U=>c.update(U)),De=(0,u.z)(U=>{c.wasMoved(U)&&(i||M||y.goToOption(D.Specific,s,0))}),Me=(0,u.z)(U=>{c.wasMoved(U)&&(i||M&&y.goToOption(D.Nothing))}),_e=(0,t.useMemo)(()=>({active:M,selected:R,disabled:i}),[M,R,i]);return(0,C.sY)({ourProps:{id:s,ref:F,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":R,disabled:void 0,onClick:Q,onFocus:T,onPointerEnter:N,onMouseEnter:N,onPointerMove:De,onMouseMove:De,onPointerLeave:Me,onMouseLeave:Me},theirProps:a,slot:_e,defaultTag:Y,name:"Listbox.Option"})}let $=(0,C.yV)(Ce),fe=(0,C.yV)(Ne),ae=(0,C.yV)(je),V=(0,C.yV)(f),ie=(0,C.yV)(oe),Se=Object.assign($,{Button:fe,Label:ae,Options:V,Option:ie})},31147:(ge,Z,n)=>{n.d(Z,{q:()=>G});var t=n(67294),j=n(73781);function G(K,x,m){let[u,P]=(0,t.useState)(m),O=K!==void 0,E=(0,t.useRef)(O),_=(0,t.useRef)(!1),H=(0,t.useRef)(!1);return O&&!E.current&&!_.current?(_.current=!0,E.current=O,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!O&&E.current&&!H.current&&(H.current=!0,E.current=O,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[O?K:u,(0,j.z)(S=>(O||P(S),x?.(S)))]}},18689:(ge,Z,n)=>{n.d(Z,{g:()=>K,t:()=>t});function t(x={},m=null,u=[]){for(let[P,O]of Object.entries(x))G(u,j(m,P),O);return u}function j(x,m){return x?x+"["+m+"]":m}function G(x,m,u){if(Array.isArray(u))for(let[P,O]of u.entries())G(x,j(m,P.toString()),O);else u instanceof Date?x.push([m,u.toISOString()]):typeof u=="boolean"?x.push([m,u?"1":"0"]):typeof u=="string"?x.push([m,u]):typeof u=="number"?x.push([m,`${u}`]):u==null?x.push([m,""]):t(u,m,x)}function K(x){var m,u;let P=(m=x?.form)!=null?m:x.closest("form");if(P){for(let O of P.elements)if(O!==x&&(O.tagName==="INPUT"&&O.type==="submit"||O.tagName==="BUTTON"&&O.type==="submit"||O.nodeName==="INPUT"&&O.type==="image")){O.click();return}(u=P.requestSubmit)==null||u.call(P)}}}}]);
