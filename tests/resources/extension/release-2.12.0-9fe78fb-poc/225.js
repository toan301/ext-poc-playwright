"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[225],{21261:(Z,O,e)=>{e.d(O,{u:()=>M});var s=e(86101),x=e(50533);const M=()=>{const E=(0,x.I0)();return{setColorMode:r=>{E(s.x.actions.setUIColorMode(r))}}}},40225:(Z,O,e)=>{e.r(O),e.d(O,{App:()=>V,default:()=>ts});var s=e(85893),x=e(13920),M=e(64064),E=e(82911),h=e(49756),r=e(63118),L=e(55767),T=e(96854),I=e(48161),g=e(5432),f=e(48303),c=e(45618),U=e(59078),R=e(27792),B=e(7132),W=e(1205),K=e(12790),m=e(67294),w=e(86896),H=e(50533),t=e(89250),n=e(20658),o=e(68068),S=e(44525),z=e(21261),X=e(32193),F=e(33500),Y=e(69671),j=e(70473),P=e(314),G=e(44645),b=e(61813),k=(u,p,d)=>new Promise((C,a)=>{var N=l=>{try{v(d.next(l))}catch(i){a(i)}},y=l=>{try{v(d.throw(l))}catch(i){a(i)}},v=l=>l.done?C(l.value):Promise.resolve(l.value).then(N,y);v((d=d.apply(u,p)).next())});const _=({opened:u,onClose:p,onResetting:d})=>{const{setColorMode:C}=(0,z.u)(),{formatMessage:a}=(0,w.Z)(),[N,y]=(0,m.useState)(!1),{trackAnalytics:v}=(0,S.z)(),l=(0,m.useCallback)(()=>k(void 0,null,function*(){try{y(!0),d(),yield U.Tl.emit(R.Z.RESET),C(P.R.SYSTEM),v({event:j.ih.RESET_WALLET,props:{pageViewSource:j.pG.UNLOCK}}),(0,G.YQ)(E.Z.ONBOARDING),window.close()}catch(i){b.Z.error(i)}}),[C]);return N?(0,s.jsxs)(T.M,{direction:g.k.COLUMN,children:[(0,s.jsx)("div",{children:(0,s.jsx)(x.Y,{})}),(0,s.jsx)("div",{className:"pt-20 pb-8",children:(0,s.jsx)(f.x,{type:c.Xi.SUBTITLE,children:a({id:"modal-reset-wallet.loading"})})}),(0,s.jsx)("div",{className:"pb-28",children:(0,s.jsx)(Y.$,{size:X.m.XLARGE})})]}):(0,s.jsx)(F.u,{opened:u,onClose:p,title:a({id:"modal-reset-wallet.modal.title",defaultMessage:"Reset your wallet"}),children:(0,s.jsxs)(T.M,{direction:g.k.COLUMN,children:[(0,s.jsx)("div",{children:(0,s.jsx)(n._,{})}),(0,s.jsx)("div",{className:"py-2",children:(0,s.jsxs)(f.x,{type:c.Xi.HEADER,children:[" ",a({id:"modal-reset-wallet.title"})]})}),(0,s.jsx)("div",{children:a({id:"modal-reset-wallet.description"},{brandName:o.TY.BRAND_NAME,seedPhraseName:o.TY.SEED_PHRASE_NAME,li:i=>(0,s.jsx)("div",{className:"pb-2",children:(0,s.jsx)(f.x,{weight:c.kx.NORMAL,theme:c.W5.SECONDARY,children:i})}),b:i=>(0,s.jsx)("strong",{className:"font-medium",children:i})})}),(0,s.jsx)("div",{className:"pt-3 pb-5 w-full",children:(0,s.jsx)(h.z,{theme:r.jM.DANGER,onClick:l,children:a({id:"modal-reset-wallet.btn-i-understand"})})}),(0,s.jsx)("div",{className:" w-full",children:(0,s.jsx)(h.z,{theme:r.jM.TRANSPARENT,onClick:p,children:(0,s.jsx)(f.x,{type:c.Xi.TITLE,theme:c.W5.BRAND,children:a({id:"generic.cancel"})})})})]})})};var q=e(94061),ss=(u,p,d)=>new Promise((C,a)=>{var N=l=>{try{v(d.next(l))}catch(i){a(i)}},y=l=>{try{v(d.throw(l))}catch(i){a(i)}},v=l=>l.done?C(l.value):Promise.resolve(l.value).then(N,y);v((d=d.apply(u,p)).next())});const es=()=>{(0,q.d)({event:j.pG.UNLOCK,props:null});const{formatMessage:u}=(0,w.Z)(),p=(0,t.s0)(),d=(0,t.TH)(),{trackAnalytics:C}=(0,S.z)(),[a,N]=(0,m.useState)(""),[y,v]=(0,m.useState)(""),[l,i]=(0,m.useState)(!1),[ls,$]=(0,m.useState)(!1),[ns,os]=(0,m.useState)(!1),J=(0,H.v9)(A=>A.app);(0,m.useEffect)(()=>{J.authenticated&&p(E.Z.DEFAULT,{replace:!0})},[J.authenticated]);const as=(0,m.useCallback)(A=>ss(void 0,null,function*(){var Q;A?.preventDefault(),$(!0);try{B.h.dispatch(W.t.actions.setAuthenticating(!0)),yield U.Tl.emit(R.Z.AUTHENTICATE,a);const D=((Q=d.state)==null?void 0:Q.from)||{};C({event:j.ih.UNLOCK,props:{pageViewSource:j.pG.UNLOCK,status:"success"}}),p(D.pathname+D.search||E.Z.DEFAULT,{replace:!0})}catch(D){B.h.dispatch(W.t.actions.setAuthenticating(!1)),C({event:j.ih.UNLOCK,props:{pageViewSource:j.pG.UNLOCK,status:"fail",error:D.message}}),D.message==="memory access out of bounds"?v(u({id:"unlock.memory-error"})):v(D.message),$(!1)}}),[d.state,p,a]);return(0,s.jsxs)(I._z,{children:[!ns&&(0,s.jsxs)(I.xV,{children:[(0,s.jsx)(T.M,{direction:g.k.COLUMN,children:(0,s.jsxs)("div",{className:"max-w-xs flex items-center flex-col",children:[(0,s.jsx)(x.Y,{}),(0,s.jsx)("div",{className:"pt-4 pb-6 text-center",children:(0,s.jsxs)(f.x,{type:c.Xi.TITLE,children:[" ",u({id:"unlock.subheading"})]})}),(0,s.jsxs)("form",{className:"flex flex-col w-full",onSubmit:as,children:[(0,s.jsx)(L.C,{testid:"password-field",label:u({id:"component.input-password.placeholder"}),value:a,onChange:A=>{v(""),N(A.target.value)},error:y,autoFocus:!0}),(0,s.jsx)("div",{className:"pt-6 pb-4 w-full",children:(0,s.jsx)(h.z,{type:r.JB.SUBMIT,disabled:!a,loading:ls,onClick:K.G1,children:u({id:"generic.unlock"})})})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-end text-center w-full border-t-line border-t pt-4",children:[(0,s.jsx)("div",{className:"w-10/12",children:(0,s.jsx)(f.x,{weight:c.kx.NORMAL,theme:c.W5.SECONDARY,children:u({id:"unlock.cannot-login"})})}),(0,s.jsx)(h.z,{theme:r.jM.TRANSPARENT,onClick:()=>i(!0),children:(0,s.jsx)(f.x,{theme:c.W5.BRAND,type:c.Xi.BODY,children:u({id:"unlock.reset-wallet"})})})]})]}),(0,s.jsx)(_,{opened:l,onClose:()=>i(!1),onResetting:()=>os(!0)})]})},V=()=>(0,s.jsx)(M.P,{messageFileId:"app_src_popup_modules_unlock_locales",children:(0,s.jsx)(es,{})}),ts=V},78958:(Z,O,e)=>{e.d(O,{h:()=>E});var s=e(85893);const x=24,M=24,E=({width:h,height:r,colorClass:L})=>(0,s.jsxs)("svg",{className:L,fill:"none",width:h??x,height:r??M,viewBox:`0 0 ${x} ${M}`,xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M12 14.5C13.3807 14.5 14.5 13.3807 14.5 12C14.5 10.6193 13.3807 9.5 12 9.5C10.6193 9.5 9.5 10.6193 9.5 12C9.5 13.3807 10.6193 14.5 12 14.5Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.55528 6.30998L1 12L6.55528 17.69C9.56231 20.77 14.4377 20.77 17.4447 17.69L23 12L17.4447 6.30998C14.4377 3.23001 9.56232 3.23 6.55528 6.30998ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",fill:"currentColor"})]})},55767:(Z,O,e)=>{e.d(O,{C:()=>H});var s=e(85893),x=e(88813),M=e(89431),E=e(78958),h=e(83522),r=e(42437),L=e(48303),T=e(45618),I=e(67294),g=e(86896),f=Object.defineProperty,c=Object.defineProperties,U=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,K=(t,n,o)=>n in t?f(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,m=(t,n)=>{for(var o in n||(n={}))B.call(n,o)&&K(t,o,n[o]);if(R)for(var o of R(n))W.call(n,o)&&K(t,o,n[o]);return t},w=(t,n)=>c(t,U(n));const H=t=>{var n;const{formatMessage:o}=(0,g.Z)(),[S,z]=(0,I.useState)(!1),[X,F]=(0,I.useState)(!t.value),Y={[r.Y6.INVALID_LENGTH]:o({id:"validate-password.length"}),[r.Y6.MISSING_UPPERCASE]:o({id:"validate-password.case"}),[r.Y6.MISSING_DIGIT]:o({id:"validate-password.digit"}),[r.Y6.MISSING_SYMBOL]:o({id:"validate-password.symbol"})},j=X?"":t.error;return(0,I.useEffect)(()=>{t.value&&F(!1)},[t.value]),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(h.o,w(m({testid:t.testid,type:S?r.rC.TEXT:r.rC.PASSWORD},t),{error:j,validation:t.validation,actions:[{key:"show-password",placeholder:S?(0,s.jsx)(E.h,{colorClass:"text-iconNormal"}):(0,s.jsx)(M.v,{colorClass:"text-iconNormal"}),onClick:()=>z(P=>!P)}]})),((n=t.validation)==null?void 0:n.criteriaErrors)&&(0,s.jsx)("ul",{className:"space-y-2",children:Object.keys(Y).map(P=>{var G;return(0,s.jsxs)("li",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:`flex items-center justify-center w-5.5 h-5.5 rounded-full ${(G=t.validation)!=null&&G.criteriaErrors.includes(P)?"border border-textDisabled":"bg-primary"}`,children:(0,s.jsx)(x.n,{colorClass:"text-backgroundPrimary"})}),(0,s.jsx)(L.x,{type:T.Xi.SUBTITLE,theme:T.W5.SECONDARY,children:Y[P]})]},P)})})]})}}}]);
